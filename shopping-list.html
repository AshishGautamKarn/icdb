<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Your personal shopping list on ICDB. Organize ingredients from recipes and add your own items.">
    <!-- Noindex is generally appropriate for personal user data pages -->
    <meta name="robots" content="noindex, nofollow">
    <title>My Shopping List - ICDB</title>

    <!-- Favicon -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon"> <!-- Update path if needed -->

    <!-- CSS Stylesheets -->
    <link rel="stylesheet" href="css/layout.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/print.css" media="print"> <!-- Specific print styles -->

</head>
<body>

    <!-- ========================================================================= -->
    <!-- HEADER (Consistent across site)                                         -->
    <!-- Assume user is logged in to access this page.                         -->
    <!-- ========================================================================= -->
    <header class="site-header">
        <!-- Placeholder for header content (Logo, Nav, Search, User Menu showing logged-in state) -->
        <div class="container header-container">
             <a href="index.html" class="logo" aria-label="ICDB Homepage"><img src="images/logo.png" alt="ICDB Logo"><span>ICDB</span></a>
             <nav class="main-navigation">...</nav>
             <form class="header-search">...</form>
             <div class="user-actions">
                <!-- Assume Logged In State -->
                <div class="user-menu">
                    <button class="btn btn-icon profile-btn" aria-label="User Menu">
                        <img src="images/placeholder/user-avatar.png" alt="User Avatar" class="avatar-small"> <!-- Dynamic Avatar -->
                    </button>
                     <div class="dropdown-menu">
                        <a href="profile.html?user=myCurrentUser">My Profile</a> <!-- Dynamic Link -->
                        <a href="settings.html">Settings</a>
                        <a href="shopping-list.html">Shopping List</a> <!-- Link to self -->
                        <a href="#">Logout</a> <!-- Placeholder action -->
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ========================================================================= -->
    <!-- MAIN CONTENT AREA - SHOPPING LIST PAGE                                  -->
    <!-- ========================================================================= -->
    <main class="shopping-list-page container">

        <h1 class="page-title">My Shopping List</h1>

        <!-- List Actions & Controls -->
        <section class="list-controls card card-inset">
            <div class="controls-main">
                <!-- Grouping/Sorting -->
                <div class="form-group">
                    <label for="group-by">Group By:</label>
                    <select id="group-by" name="group_by">
                        <option value="category" selected>Store Category (Aisle)</option>
                        <option value="recipe">Recipe</option>
                        <option value="none">No Grouping</option>
                    </select>
                </div>
                <!-- Bulk Actions -->
                 <div class="bulk-actions">
                    <button type="button" id="clear-checked-btn" class="btn btn-secondary btn-small">Clear Checked Items</button>
                    <button type="button" id="clear-all-btn" class="btn btn-danger btn-small">Clear Entire List</button>
                    <button type="button" id="print-list-btn" class="btn btn-secondary btn-small" onclick="window.print();">Print List</button>
                 </div>
            </div>
             <!-- Add Custom Item Form -->
             <form id="add-custom-item-form" class="add-item-form">
                 <input type="text" id="custom-item-name" name="custom_item_name" placeholder="Add custom item (e.g., paper towels)" required>
                 <button type="submit" class="btn btn-primary btn-small">Add Item</button>
             </form>
             <!-- User Feedback Area -->
             <div class="form-message" id="list-message" role="alert"></div>
        </section>

        <!-- Shopping List Display Area -->
        <section class="shopping-list-container card">
            <!-- List items will be dynamically inserted here, potentially within group containers -->
            <div id="shopping-list-items">
                <!-- Example Grouping by Category (structure generated by JS) -->
                <section class="list-group" data-group="Produce">
                    <h2 class="group-title">Produce</h2>
                    <ul class="list-items">
                         <!-- Example List Item (Populated Dynamically) -->
                        <li class="shopping-list-item" data-item-id="ing-onion-123">
                            <input type="checkbox" id="item-onion-123" class="item-checkbox">
                            <label for="item-onion-123" class="item-details">
                                <span class="item-qty-unit"><input type="text" value="1" class="item-qty-input" aria-label="Quantity"> large</span> <!-- Allow editing qty -->
                                <span class="item-name"><a href="ingredient-detail.html?name=onion">Onion</a></span>
                                <span class="item-source">(from Classic Lasagna)</span> <!-- Optional Source -->
                            </label>
                            <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                        <!-- Another Item -->
                        <li class="shopping-list-item" data-item-id="ing-basil-456">
                            <input type="checkbox" id="item-basil-456" class="item-checkbox" checked> <!-- Example Checked Item -->
                             <label for="item-basil-456" class="item-details item-checked"> <!-- Add class when checked -->
                                <span class="item-qty-unit"><input type="text" value="1" class="item-qty-input" aria-label="Quantity"> bunch</span>
                                <span class="item-name"><a href="ingredient-detail.html?name=basil">Fresh Basil</a></span>
                                <span class="item-source">(from Caprese Salad)</span>
                            </label>
                            <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                         <!-- Custom Added Item Example -->
                         <li class="shopping-list-item custom-item" data-item-id="custom-papertowels-789">
                            <input type="checkbox" id="item-custom-789" class="item-checkbox">
                             <label for="item-custom-789" class="item-details">
                                <!-- No quantity input for simple custom items initially? Or add one -->
                                <span class="item-name">Paper Towels</span>
                                <span class="item-source">(Custom)</span>
                            </label>
                            <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                    </ul>
                </section>

                <section class="list-group" data-group="Dairy & Refrigerated">
                    <h2 class="group-title">Dairy & Refrigerated</h2>
                    <ul class="list-items">
                        <li class="shopping-list-item" data-item-id="ing-mozzarella-124">
                             <input type="checkbox" id="item-mozzarella-124" class="item-checkbox">
                             <label for="item-mozzarella-124" class="item-details">
                                <span class="item-qty-unit"><input type="text" value="8" class="item-qty-input" aria-label="Quantity"> oz</span>
                                <span class="item-name"><a href="ingredient-detail.html?name=mozzarella">Fresh Mozzarella</a></span>
                                <span class="item-source">(from Caprese Salad)</span>
                            </label>
                            <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                         <li class="shopping-list-item" data-item-id="ing-butter-125">
                             <input type="checkbox" id="item-butter-125" class="item-checkbox">
                             <label for="item-butter-125" class="item-details">
                                <span class="item-qty-unit"><input type="text" value="1/2" class="item-qty-input" aria-label="Quantity"> cup</span>
                                <span class="item-name"><a href="ingredient-detail.html?name=butter">Butter</a></span>
                                <span class="item-source">(from Chocolate Chip Cookies)</span>
                            </label>
                             <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                        <!-- More items -->
                    </ul>
                </section>

                 <section class="list-group" data-group="Pantry">
                    <h2 class="group-title">Pantry</h2>
                    <ul class="list-items">
                        <li class="shopping-list-item" data-item-id="ing-noodles-126">
                             <input type="checkbox" id="item-noodles-126" class="item-checkbox">
                             <label for="item-noodles-126" class="item-details">
                                <span class="item-qty-unit"><input type="text" value="1" class="item-qty-input" aria-label="Quantity"> box</span>
                                <span class="item-name"><a href="ingredient-detail.html?name=lasagna-noodles">Lasagna Noodles</a></span>
                                <span class="item-source">(from Classic Lasagna)</span>
                            </label>
                             <div class="item-actions">
                                <button type="button" class="btn btn-icon btn-danger remove-item-btn" aria-label="Remove Item">
                                     <img src="images/icons/delete.svg" alt="Remove">
                                </button>
                            </div>
                        </li>
                        <!-- More items -->
                    </ul>
                 </section>

                <!-- Add more category groups dynamically -->

                <!-- Empty List Message (Shown if #shopping-list-items is empty) -->
                <div class="empty-list-message" style="display: none;"> <!-- Toggle dynamically -->
                     <p>Your shopping list is empty.</p>
                     <p>Add ingredients from recipes or use the form above to add custom items.</p>
                     <a href="/index.html" class="btn btn-primary">Browse Recipes</a>
                </div>

            </div> <!-- End #shopping-list-items -->
        </section>

    </main>

    <!-- ========================================================================= -->
    <!-- FOOTER (Consistent across site)                                         -->
    <!-- ========================================================================= -->
    <footer class="site-footer">
        <!-- Placeholder for footer content -->
        <div class="container">
             <nav class="footer-nav">...</nav>
             <div class="social-links">...</div>
             <p class="copyright">Â© 2023 ICDB. All rights reserved.</p>
        </div>
    </footer>

    <!-- ========================================================================= -->
    <!-- SCRIPTS                                                                   -->
    <!-- ========================================================================= -->
    <!-- Main Site Logic -->
    <script src="js/main.js"></script> <!-- Handles header dropdowns, etc. -->
    <!-- Page-Specific Logic -->
    <script src="js/shopping-list.js"></script> <!-- Handles list loading, adding, removing, checking, editing, grouping, saving -->

    <!-- Inline script for initializing components on this page -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize Shopping List functionality (defined in shopping-list.js)
            // This would load the list (from localStorage or backend),
            // set up event listeners for checkboxes, remove buttons, quantity edits,
            // custom item form, grouping dropdown, and clear buttons.
            // Example: initializeShoppingList();
            console.log("Shopping List page JS loaded (concept). Needs dynamic implementation.");
        });
    </script>

</body>
</html>